cmake_minimum_required(VERSION 2.8.9)
project(shrfips140)
set(CMAKE_BUILD_TYPE Release)

SET(CRYPTOFLAGS " -DFIPS140_ONLY -DNIST_T_CR_MOD -DNO_ECC_COMBA -DNO_SOFTWARE_CRYPTO -DOPT_R_COMMON -DCRYPTOC_ME -DNO_PK_CERT -DPURIFY  -O3 -fomit-frame-pointer -Werror -Wall -Wuninitialized -DPIC -fpic -m32 -DLINUX_LSB -DNO_CONSOLE -Werror -DCPU_X86 -DL_ENDIAN -DTERMIO -DR_OS=R_OS_LINUX -DPLATFORM_LINUX -DCPUID_ASM -DRSA_PLATFORM=RSA_LINUX -DFLAT_INC -DNO_PKCS12 -DNO_CRL -DNO_CERT -DNO_NTR -DNO_ERR -DNO_WTLS -DNO_EX_DATA -DNO_PKI_SIZE -DNO_OCSP -DNO_PKCS7 -DNO_BN -DNO_EXT -DNO_SOCK -DNO_HDW_CERT -DNO_X509CERT -DNO_CERTIMPL -DNO_WTLSCERT -DNO_PROXY -DNO_RC6 -DNO_CM -DNO_R_DIAG")

add_definitions(${CRYPTOFLAGS})

SET( CMAKE_C_FLAGS  "${CMAKE_C_FLAGS} ${CRYPTOFLAGS}" )

file(GLOB SOURCES "*.c")
add_library(shrfips140 SHARED ${SOURCES})
target_include_directories (shrfips140 PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})
install(TARGETS shrfips140 LIBRARY DESTINATION ${OPEN_FOX_BIN_DIR})

